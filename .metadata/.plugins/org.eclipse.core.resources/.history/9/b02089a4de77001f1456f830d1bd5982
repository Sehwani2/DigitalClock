/*
 * buzzer.c
 *
 *  Created on: Sep 17, 2024
 *      Author: hyn02
 */

#include "buzzer.h"

 Buz Buz1;

void activateBuzzer30msOn( Buz* buzzer, TIM_HandleTypeDef* htim, uint32_t channel,uint32_t psc)
{
	if(buzzer->BuzOnOff == false)
	{
		__HAL_TIM_SET_PRESCALER(htim, psc);
		HAL_TIM_PWM_Start(htim, channel);
		buzzer->BuzCount = 0;
		buzzer->BuzOnOff = true;
	}

}

void activateBuzzer30msOff( Buz* buzzer, TIM_HandleTypeDef* htim, uint32_t channel)
{
	if (buzzer->BuzOnOff)
	{
		buzzer->BuzCount++;

		if (buzzer->BuzCount >= 30)
		{
			HAL_TIM_PWM_Stop(htim, channel);
			buzzer->BuzOnOff = false;
			buzzer->BuzCount = 0;
		}
	}
}
